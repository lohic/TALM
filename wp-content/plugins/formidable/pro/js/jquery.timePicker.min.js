(function($){$.fn.frmTimePicker=function(options){var settings=$.extend({},$.fn.frmTimePicker.defaults,options);return this.each(function(){$.frmTimePicker(this,settings);});};$.frmTimePicker=function(elm,settings){var e=$(elm)[0];return e.frmTimePicker||(e.frmTimePicker=new jQuery._frmTimePicker(e,settings));};$.frmTimePicker.version='0.3';$._frmTimePicker=function(elm,settings){var startTime=timeToDate(settings.startTime,settings);var endTime=timeToDate(settings.endTime,settings);var selected=$(elm).val();if(selected!='')
$(elm).find('option[value="'+selected+'"]').remove();var times=[];var time=new Date(startTime);while(time<=endTime){times[times.length]=formatTime(time,settings);time=new Date(time.setMinutes(time.getMinutes()+settings.step));}
for(var i=0;i<times.length;i++){$(elm).append("<option value='"+times[i]+"'>"+times[i]+"</option>");}
$(elm).val(selected);};$.fn.frmTimePicker.defaults={step:30,startTime:new Date(0,0,0,0,0,0),endTime:new Date(0,0,0,23,30,0),separator:':',show24Hours:true};function formatTime(time,settings){var h=time.getHours();var hours=settings.show24Hours?h:(((h+11)%12)+1);var minutes=time.getMinutes();return formatNumber(hours)+settings.separator+formatNumber(minutes)+(settings.show24Hours?'':((h<12)?' AM':' PM'));}
function formatNumber(a){return(a<10?'0':'')+a;}
function timeToDate(a,b){return(typeof a=='object')?normaliseTime(a):timeStringToDate(a,b);}
function timeStringToDate(a,b){if(a){var array=a.split(b.separator);var c=parseFloat(array[0]);var d=parseFloat(array[1]);if(!b.show24Hours){if(c===12&&a.indexOf('AM')!==-1){c=0;}
else if(c!==12&&a.indexOf('PM')!==-1){c+=12;}}var time=new Date(0,0,0,c,d,0);return normaliseTime(time);}return null;}
function normaliseTime(a){a.setFullYear(2001);a.setMonth(0);a.setDate(0);return a;}})(jQuery);